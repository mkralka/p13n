#!/bin/sh
##
## Merge script for merging files from different packages.
##
## This is required because ssh's `Include` directive doesn't match symlinks
## when expanding wildcards (otherwise this could be as simple as
## `Include config.d/*`).

cat <<EOF
################################################################################
## DO NOT EDIT THIS FILE
##
## This file was is generated by p13n and any changes to it will be wiped
## away next time it is run. Add fragments to files in ~/.ssh/config.d to get
## merged here.
################################################################################

EOF
for path in "$@"; do
	# Exclude any "hidden" files (start with `.`).
	filename="$(basename "$path")"
	if test "x${filename##.}" = "x${filename}"; then
		echo "Include $path"
	fi
done
